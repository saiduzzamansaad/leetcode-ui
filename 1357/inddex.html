<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Checkout 2025 | AI-Powered Shopping</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap');
        
        :root {
            --primary: #6d28d9;
            --secondary: #10b981;
            --accent: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0f172a;
            color: var(--light);
        }
        
        .orbitron {
            font-family: 'Orbitron', sans-serif;
        }
        
        .holographic-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            border-radius: 16px;
        }
        
        .glow-effect {
            position: relative;
            overflow: hidden;
        }
        
        .glow-effect::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(109, 40, 217, 0),
                rgba(109, 40, 217, 0),
                rgba(109, 40, 217, 0.3),
                rgba(109, 40, 217, 0)
            );
            transform: rotate(30deg);
            animation: glow 6s infinite linear;
        }
        
        @keyframes glow {
            0% { transform: rotate(30deg) translate(-10%, -10%); }
            50% { transform: rotate(30deg) translate(10%, 10%); }
            100% { transform: rotate(30deg) translate(-10%, -10%); }
        }
        
        .neon-text {
            text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px var(--secondary), 0 0 20px var(--secondary);
        }
        
        .scanline {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.03) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            animation: scan 4s linear infinite;
            pointer-events: none;
        }
        
        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            pointer-events: none;
        }
        
        .quantum-loader {
            width: 50px;
            height: 50px;
            border: 3px solid transparent;
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            position: relative;
        }
        
        .quantum-loader::before,
        .quantum-loader::after {
            content: '';
            position: absolute;
            border: 3px solid transparent;
            border-radius: 50%;
        }
        
        .quantum-loader::before {
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-top-color: var(--primary);
            animation: spin 3s linear infinite;
        }
        
        .quantum-loader::after {
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border-top-color: var(--secondary);
            animation: spin 1.5s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .floating {
            animation: floating 6s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        
        .typing-animation {
            overflow: hidden;
            border-right: 2px solid var(--accent);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--accent) }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Holographic Header -->
    <header class="holographic-card glow-effect relative overflow-hidden py-6 mb-8">
        <div class="scanline"></div>
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <h1 class="orbitron text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-emerald-400 mb-4 md:mb-0 neon-text">
                    Quantum<span class="text-accent">Checkout</span> 2025
                </h1>
                <div class="flex items-center space-x-4">
                    <div class="quantum-loader"></div>
                    <span class="orbitron text-emerald-300">AI-Powered Shopping System</span>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Product Configuration Panel -->
            <div class="holographic-card p-6 col-span-1 relative overflow-hidden">
                <div class="scanline"></div>
                <h2 class="orbitron text-2xl font-bold mb-6 text-purple-300 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                    </svg>
                    System Configuration
                </h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-1">Discount Frequency (n)</label>
                        <input type="number" id="discountFrequency" min="1" value="3" class="w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-1">Discount Percentage</label>
                        <input type="number" id="discountPercentage" min="0" max="100" value="50" class="w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    
                    <div class="pt-4">
                        <h3 class="orbitron text-lg font-bold mb-3 text-emerald-300">Product Database</h3>
                        <div class="space-y-3" id="productList">
                            <!-- Products will be added here dynamically -->
                        </div>
                        
                        <div class="mt-4 flex space-x-2">
                            <input type="number" id="newProductId" placeholder="Product ID" class="flex-1 bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <input type="number" id="newProductPrice" placeholder="Price" class="flex-1 bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <button onclick="addProduct()" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md transition-all duration-300 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                                </svg>
                                Add
                            </button>
                        </div>
                    </div>
                    
                    <button onclick="initializeSystem()" class="mt-6 w-full bg-gradient-to-r from-purple-600 to-emerald-600 text-white py-3 px-4 rounded-md font-bold orbitron hover:from-purple-700 hover:to-emerald-700 transition-all duration-300 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                        </svg>
                        INITIALIZE QUANTUM CHECKOUT
                    </button>
                </div>
            </div>
            
            <!-- Shopping Cart Panel -->
            <div class="holographic-card p-6 col-span-1 relative overflow-hidden">
                <div class="scanline"></div>
                <h2 class="orbitron text-2xl font-bold mb-6 text-purple-300 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    Shopping Cart
                </h2>
                
                <div class="space-y-4" id="cartItems">
                    <!-- Cart items will be added here dynamically -->
                    <div class="text-center py-8 text-gray-400" id="emptyCartMessage">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <p>Your cart is empty</p>
                        <p class="text-sm">Add products from the inventory</p>
                    </div>
                </div>
                
                <div class="mt-6 border-t border-gray-700 pt-4">
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-300">Subtotal:</span>
                        <span class="font-medium" id="subtotal">$0.00</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-300">Discount:</span>
                        <span class="font-medium text-emerald-400" id="discountAmount">$0.00</span>
                    </div>
                    <div class="flex justify-between text-lg font-bold">
                        <span>Total:</span>
                        <span class="text-purple-300" id="totalAmount">$0.00</span>
                    </div>
                    
                    <button onclick="processCheckout()" class="mt-6 w-full bg-gradient-to-r from-emerald-600 to-purple-600 text-white py-3 px-4 rounded-md font-bold orbitron hover:from-emerald-700 hover:to-purple-700 transition-all duration-300 flex items-center justify-center" id="checkoutButton" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
                        </svg>
                        PROCESS QUANTUM CHECKOUT
                    </button>
                </div>
            </div>
            
            <!-- Customer Display & Analytics -->
            <div class="holographic-card p-6 col-span-1 lg:col-span-1 relative overflow-hidden">
                <div class="scanline"></div>
                <h2 class="orbitron text-2xl font-bold mb-6 text-purple-300 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    Customer Analytics
                </h2>
                
                <div class="space-y-6">
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="orbitron text-lg text-emerald-300">Customer Counter</h3>
                            <span class="text-2xl font-bold text-purple-300" id="customerCounter">0</span>
                        </div>
                        <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                            <div id="discountProgress" class="h-full bg-gradient-to-r from-purple-500 to-emerald-500" style="width: 0%"></div>
                        </div>
                        <p class="text-sm text-gray-400 mt-1" id="discountStatus">No discount applied yet</p>
                    </div>
                    
                    <div class="bg-gray-800 rounded-lg p-4">
                        <h3 class="orbitron text-lg text-emerald-300 mb-3">Transaction History</h3>
                        <div class="space-y-3 max-h-60 overflow-y-auto pr-2" id="transactionHistory">
                            <!-- Transactions will be added here -->
                            <div class="text-center py-4 text-gray-400">
                                No transactions yet
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-lg p-4 animate__animated animate__fadeIn">
                        <h3 class="orbitron text-lg text-emerald-300 mb-3">Real-time Stats</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-900 p-3 rounded-lg">
                                <div class="text-sm text-gray-400">Total Revenue</div>
                                <div class="text-xl font-bold text-purple-300" id="totalRevenue">$0.00</div>
                            </div>
                            <div class="bg-gray-900 p-3 rounded-lg">
                                <div class="text-sm text-gray-400">Discounts Given</div>
                                <div class="text-xl font-bold text-emerald-300" id="totalDiscounts">0</div>
                            </div>
                            <div class="bg-gray-900 p-3 rounded-lg">
                                <div class="text-sm text-gray-400">Avg. Order Value</div>
                                <div class="text-xl font-bold text-amber-300" id="avgOrderValue">$0.00</div>
                            </div>
                            <div class="bg-gray-900 p-3 rounded-lg">
                                <div class="text-sm text-gray-400">Products Sold</div>
                                <div class="text-xl font-bold text-blue-300" id="productsSold">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Product Inventory -->
        <div class="holographic-card mt-8 p-6 relative overflow-hidden">
            <div class="scanline"></div>
            <h2 class="orbitron text-2xl font-bold mb-6 text-purple-300 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                </svg>
                Quantum Inventory
            </h2>
            
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4" id="inventoryItems">
                <!-- Inventory items will be added here dynamically -->
            </div>
        </div>
    </main>
    
    <!-- Holographic Footer -->
    <footer class="holographic-card mt-12 py-6 relative overflow-hidden">
        <div class="scanline"></div>
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="orbitron text-lg mb-4 md:mb-0">
                    <span class="text-purple-300">Quantum</span><span class="text-emerald-300">Checkout</span> <span class="text-gray-400">2025</span>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-purple-300 transition-colors">Terms</a>
                    <a href="#" class="text-gray-400 hover:text-purple-300 transition-colors">Privacy</a>
                    <a href="#" class="text-gray-400 hover:text-purple-300 transition-colors">API</a>
                    <a href="#" class="text-gray-400 hover:text-purple-300 transition-colors">Contact</a>
                </div>
            </div>
            <div class="mt-4 text-center md:text-left text-sm text-gray-500">
                <p>© 2025 Quantum Retail Systems. All rights reserved. This is a futuristic concept UI for demonstration purposes only.</p>
            </div>
        </div>
    </footer>
    
    <!-- Confetti Animation Container -->
    <div id="confetti-container" class="fixed top-0 left-0 w-full h-full pointer-events-none z-50"></div>
    
    <!-- Audio Elements -->
    <audio id="scanSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" preload="auto"></audio>
    <audio id="discountSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" preload="auto"></audio>
    <audio id="checkoutSound" src="https://assets.mixkit.co/sfx/preview/mixkit-cash-register-purchase-880.mp3" preload="auto"></audio>
    
    <script>
        // Global variables
        let cashier;
        let products = [];
        let prices = [];
        let cart = [];
        let transactionHistory = [];
        let stats = {
            totalRevenue: 0,
            totalDiscounts: 0,
            totalProductsSold: 0,
            totalTransactions: 0
        };
        
        // DOM Elements
        const productListEl = document.getElementById('productList');
        const inventoryItemsEl = document.getElementById('inventoryItems');
        const cartItemsEl = document.getElementById('cartItems');
        const emptyCartMessageEl = document.getElementById('emptyCartMessage');
        const subtotalEl = document.getElementById('subtotal');
        const discountAmountEl = document.getElementById('discountAmount');
        const totalAmountEl = document.getElementById('totalAmount');
        const customerCounterEl = document.getElementById('customerCounter');
        const discountProgressEl = document.getElementById('discountProgress');
        const discountStatusEl = document.getElementById('discountStatus');
        const transactionHistoryEl = document.getElementById('transactionHistory');
        const checkoutButtonEl = document.getElementById('checkoutButton');
        const totalRevenueEl = document.getElementById('totalRevenue');
        const totalDiscountsEl = document.getElementById('totalDiscounts');
        const avgOrderValueEl = document.getElementById('avgOrderValue');
        const productsSoldEl = document.getElementById('productsSold');
        const confettiContainer = document.getElementById('confetti-container');
        
        // Audio elements
        const scanSound = document.getElementById('scanSound');
        const discountSound = document.getElementById('discountSound');
        const checkoutSound = document.getElementById('checkoutSound');
        
        // Initialize with sample data
        function initializeSampleData() {
            // Sample products
            products = [1, 2, 3, 4, 5, 6, 7];
            prices = [100, 200, 300, 400, 300, 200, 100];
            
            // Render product list
            renderProductList();
            renderInventory();
            
            // Initialize cashier with sample data
            const n = parseInt(document.getElementById('discountFrequency').value);
            const discount = parseInt(document.getElementById('discountPercentage').value);
            cashier = new Cashier(n, discount, products, prices);
        }
        
        // Initialize system with current configuration
        function initializeSystem() {
            const n = parseInt(document.getElementById('discountFrequency').value);
            const discount = parseInt(document.getElementById('discountPercentage').value);
            
            if (products.length === 0) {
                alert("Please add at least one product to initialize the system");
                return;
            }
            
            cashier = new Cashier(n, discount, products, prices);
            
            // Reset counters
            cart = [];
            updateCartUI();
            updateStatsUI();
            
            // Show success message
            showNotification("Quantum Checkout System Initialized!", "System is ready to process transactions with discount every " + n + " customers.", "success");
            
            // Enable checkout button
            checkoutButtonEl.disabled = false;
            
            // Play sound
            checkoutSound.play();
        }
        
        // Add product to the system
        function addProduct() {
            const productId = parseInt(document.getElementById('newProductId').value);
            const productPrice = parseInt(document.getElementById('newProductPrice').value);
            
            if (isNaN(productId) || isNaN(productPrice) || productId <= 0 || productPrice <= 0) {
                alert("Please enter valid product ID and price");
                return;
            }
            
            if (products.includes(productId)) {
                alert("Product ID already exists");
                return;
            }
            
            products.push(productId);
            prices.push(productPrice);
            
            // Clear inputs
            document.getElementById('newProductId').value = '';
            document.getElementById('newProductPrice').value = '';
            
            // Update UI
            renderProductList();
            renderInventory();
            
            // Show notification
            showNotification("Product Added", "Product ID: " + productId + " with price $" + productPrice + " has been added to the system.", "info");
            
            // Play sound
            scanSound.play();
        }
        
        // Render product list in configuration panel
        function renderProductList() {
            productListEl.innerHTML = '';
            
            if (products.length === 0) {
                productListEl.innerHTML = '<p class="text-gray-400 text-center py-4">No products added yet</p>';
                return;
            }
            
            for (let i = 0; i < products.length; i++) {
                const productEl = document.createElement('div');
                productEl.className = 'flex justify-between items-center bg-gray-800 p-3 rounded-lg';
                productEl.innerHTML = `
                    <div>
                        <span class="font-medium text-purple-300">ID: ${products[i]}</span>
                        <span class="text-gray-400 ml-2">Price: $${prices[i]}</span>
                    </div>
                    <button onclick="removeProduct(${i})" class="text-red-400 hover:text-red-300 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                productListEl.appendChild(productEl);
            }
        }
        
        // Render inventory items
        function renderInventory() {
            inventoryItemsEl.innerHTML = '';
            
            if (products.length === 0) {
                inventoryItemsEl.innerHTML = '<p class="text-gray-400 text-center py-4 col-span-full">No products in inventory</p>';
                return;
            }
            
            for (let i = 0; i < products.length; i++) {
                const inventoryItemEl = document.createElement('div');
                inventoryItemEl.className = 'bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer group floating';
                inventoryItemEl.innerHTML = `
                    <div class="flex flex-col items-center text-center">
                        <div class="w-16 h-16 bg-purple-900 rounded-full flex items-center justify-center mb-3 group-hover:bg-purple-800 transition-colors">
                            <span class="orbitron text-xl text-purple-300">${products[i]}</span>
                        </div>
                        <h3 class="font-medium">Product ${products[i]}</h3>
                        <p class="text-emerald-400 font-bold mt-1">$${prices[i]}</p>
                        <button onclick="addToCart(${products[i]})" class="mt-3 bg-purple-600 hover:bg-purple-700 text-white py-1 px-3 rounded-md text-sm transition-colors flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
                            </svg>
                            Add to Cart
                        </button>
                    </div>
                `;
                inventoryItemsEl.appendChild(inventoryItemEl);
            }
        }
        
        // Remove product from system
        function removeProduct(index) {
            products.splice(index, 1);
            prices.splice(index, 1);
            renderProductList();
            renderInventory();
            
            // Play sound
            scanSound.play();
        }
        
        // Add product to cart
        function addToCart(productId) {
            // Check if product already in cart
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    productId: productId,
                    quantity: 1
                });
            }
            
            updateCartUI();
            
            // Play sound
            scanSound.play();
        }
        
        // Update cart quantity
        function updateCartItem(productId, newQuantity) {
            const item = cart.find(item => item.productId === productId);
            
            if (item) {
                if (newQuantity <= 0) {
                    // Remove item if quantity is 0 or less
                    cart = cart.filter(item => item.productId !== productId);
                } else {
                    item.quantity = newQuantity;
                }
            }
            
            updateCartUI();
        }
        
        // Update cart UI
        function updateCartUI() {
            cartItemsEl.innerHTML = '';
            
            if (cart.length === 0) {
                emptyCartMessageEl.style.display = 'block';
                subtotalEl.textContent = '$0.00';
                discountAmountEl.textContent = '$0.00';
                totalAmountEl.textContent = '$0.00';
                return;
            }
            
            emptyCartMessageEl.style.display = 'none';
            
            let subtotal = 0;
            
            for (const item of cart) {
                const productIndex = products.indexOf(item.productId);
                if (productIndex === -1) continue;
                
                const price = prices[productIndex];
                const itemTotal = price * item.quantity;
                subtotal += itemTotal;
                
                const cartItemEl = document.createElement('div');
                cartItemEl.className = 'flex justify-between items-center bg-gray-800 p-3 rounded-lg';
                cartItemEl.innerHTML = `
                    <div class="flex items-center">
                        <span class="font-medium text-purple-300 mr-3">ID: ${item.productId}</span>
                        <span class="text-gray-400">$${price} each</span>
                    </div>
                    <div class="flex items-center">
                        <button onclick="updateCartItem(${item.productId}, ${item.quantity - 1})" class="bg-gray-700 hover:bg-gray-600 text-white w-8 h-8 flex items-center justify-center rounded-l-md transition-colors">
                            -
                        </button>
                        <span class="bg-gray-800 px-3 py-1">${item.quantity}</span>
                        <button onclick="updateCartItem(${item.productId}, ${item.quantity + 1})" class="bg-gray-700 hover:bg-gray-600 text-white w-8 h-8 flex items-center justify-center rounded-r-md transition-colors">
                            +
                        </button>
                        <span class="ml-4 font-medium w-20 text-right">$${itemTotal.toFixed(2)}</span>
                    </div>
                `;
                cartItemsEl.appendChild(cartItemEl);
            }
            
            // Calculate totals
            subtotalEl.textContent = '$' + subtotal.toFixed(2);
            discountAmountEl.textContent = '$0.00';
            totalAmountEl.textContent = '$' + subtotal.toFixed(2);
        }
        
        // Process checkout
        function processCheckout() {
            if (!cashier) {
                alert("Please initialize the system first");
                return;
            }
            
            if (cart.length === 0) {
                alert("Your cart is empty");
                return;
            }
            
            // Prepare data for getBill
            const productIds = cart.map(item => item.productId);
            const amounts = cart.map(item => item.quantity);
            
            // Process bill
            const total = cashier.getBill(productIds, amounts);
            const subtotal = parseFloat(subtotalEl.textContent.substring(1));
            const discountAmount = subtotal - total;
            
            // Update UI with discount if applied
            discountAmountEl.textContent = '-$' + discountAmount.toFixed(2);
            totalAmountEl.textContent = '$' + total.toFixed(2);
            
            // Update customer counter
            customerCounterEl.textContent = cashier.customerCount;
            
            // Update discount progress
            const progress = (cashier.customerCount % cashier.n) / cashier.n * 100;
            discountProgressEl.style.width = progress + '%';
            
            // Update discount status
            if (cashier.customerCount % cashier.n === 0) {
                discountStatusEl.textContent = 'Discount applied!';
                discountStatusEl.className = 'text-sm text-emerald-400 mt-1';
                
                // Play discount sound
                discountSound.play();
                
                // Show confetti
                createConfetti();
                
                // Update stats
                stats.totalDiscounts += 1;
            } else {
                discountStatusEl.textContent = `${cashier.n - (cashier.customerCount % cashier.n)} more customers until next discount`;
                discountStatusEl.className = 'text-sm text-gray-400 mt-1';
            }
            
            // Add to transaction history
            const transaction = {
                customerNumber: cashier.customerCount,
                subtotal: subtotal,
                discount: discountAmount,
                total: total,
                timestamp: new Date(),
                products: [...cart]
            };
            
            transactionHistory.unshift(transaction);
            renderTransactionHistory();
            
            // Update stats
            stats.totalRevenue += total;
            stats.totalProductsSold += amounts.reduce((sum, amount) => sum + amount, 0);
            stats.totalTransactions += 1;
            updateStatsUI();
            
            // Clear cart
            cart = [];
            updateCartUI();
            
            // Play checkout sound
            checkoutSound.play();
            
            // Show notification
            showNotification(
                `Checkout Complete #${cashier.customerCount}`,
                cashier.customerCount % cashier.n === 0 
                    ? `Congratulations! You received a ${cashier.discount}% discount.` 
                    : 'Thank you for your purchase!',
                'success'
            );
        }
        
        // Render transaction history
        function renderTransactionHistory() {
            transactionHistoryEl.innerHTML = '';
            
            if (transactionHistory.length === 0) {
                transactionHistoryEl.innerHTML = '<div class="text-center py-4 text-gray-400">No transactions yet</div>';
                return;
            }
            
            for (const transaction of transactionHistory.slice(0, 5)) {
                const transactionEl = document.createElement('div');
                transactionEl.className = 'bg-gray-700 p-3 rounded-lg animate__animated animate__fadeIn';
                
                const discountApplied = transaction.discount > 0;
                
                transactionEl.innerHTML = `
                    <div class="flex justify-between items-start mb-1">
                        <div class="font-medium">#${transaction.customerNumber}</div>
                        <div class="text-sm text-gray-400">${transaction.timestamp.toLocaleTimeString()}</div>
                    </div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>Subtotal:</span>
                        <span>$${transaction.subtotal.toFixed(2)}</span>
                    </div>
                    ${discountApplied ? `
                    <div class="flex justify-between text-sm mb-1 text-emerald-400">
                        <span>Discount (${cashier.discount}%):</span>
                        <span>-$${transaction.discount.toFixed(2)}</span>
                    </div>
                    ` : ''}
                    <div class="flex justify-between font-medium mt-2 pt-2 border-t border-gray-600">
                        <span>Total:</span>
                        <span class="${discountApplied ? 'text-purple-300' : ''}">$${transaction.total.toFixed(2)}</span>
                    </div>
                `;
                
                transactionHistoryEl.appendChild(transactionEl);
            }
        }
        
        // Update statistics UI
        function updateStatsUI() {
            totalRevenueEl.textContent = '$' + stats.totalRevenue.toFixed(2);
            totalDiscountsEl.textContent = stats.totalDiscounts;
            productsSoldEl.textContent = stats.totalProductsSold;
            
            const avgOrderValue = stats.totalTransactions > 0 
                ? stats.totalRevenue / stats.totalTransactions 
                : 0;
            avgOrderValueEl.textContent = '$' + avgOrderValue.toFixed(2);
        }
        
        // Show notification
        function showNotification(title, message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm animate__animated animate__fadeInRight ${type === 'success' ? 'bg-emerald-800' : type === 'error' ? 'bg-red-800' : 'bg-purple-800'}`;
            notification.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        ${type === 'success' ? `
                        <svg class="h-6 w-6 text-emerald-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        ` : type === 'error' ? `
                        <svg class="h-6 w-6 text-red-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        ` : `
                        <svg class="h-6 w-6 text-purple-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        `}
                    </div>
                    <div class="ml-3">
                        <h3 class="font-medium orbitron ${type === 'success' ? 'text-emerald-200' : type === 'error' ? 'text-red-200' : 'text-purple-200'}">${title}</h3>
                        <p class="mt-1 text-sm ${type === 'success' ? 'text-emerald-100' : type === 'error' ? 'text-red-100' : 'text-purple-100'}">${message}</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex h-8 w-8 ${type === 'success' ? 'text-emerald-200 hover:bg-emerald-700' : type === 'error' ? 'text-red-200 hover:bg-red-700' : 'text-purple-200 hover:bg-purple-700'}">
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.classList.remove('animate__fadeInRight');
                notification.classList.add('animate__fadeOutRight');
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }
        
        // Create confetti effect
        function createConfetti() {
            confettiContainer.innerHTML = '';
            
            // Create particles
            for (let i = 0; i < 100; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random properties
                const size = Math.random() * 10 + 5;
                const posX = Math.random() * window.innerWidth;
                const posY = Math.random() * window.innerHeight - window.innerHeight;
                const color = `hsl(${Math.random() * 360}, 100%, 50%)`;
                const delay = Math.random() * 5;
                const duration = Math.random() * 3 + 2;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}px`;
                particle.style.top = `${posY}px`;
                particle.style.backgroundColor = color;
                particle.style.animation = `fall ${duration}s ease-in ${delay}s forwards`;
                
                // Add to container
                confettiContainer.appendChild(particle);
            }
            
            // Add styles for animation
            const style = document.createElement('style');
            style.innerHTML = `
                @keyframes fall {
                    to {
                        transform: translateY(${window.innerHeight + 100}px) rotate(720deg);
                        opacity: 0;
                    }
                }
            `;
            confettiContainer.appendChild(style);
            
            // Remove after animation completes
            setTimeout(() => {
                confettiContainer.innerHTML = '';
            }, 8000);
        }
        
        // Initialize on page load
        window.onload = function() {
            initializeSampleData();
            
            // Add typing animation to title
            const title = document.querySelector('header h1');
            title.classList.add('typing-animation');
        };
    </script>
</body>
</html>